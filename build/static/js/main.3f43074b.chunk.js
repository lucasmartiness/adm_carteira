(this["webpackJsonpapp-votacao"]=this["webpackJsonpapp-votacao"]||[]).push([[0],{141:function(e,a,t){e.exports=t(247)},247:function(e,a,t){"use strict";t.r(a);var n=t(0),o=t.n(n),r=t(10),i=t.n(r),l=t(129),c=t(59),u=t(299),s=Object(c.b)({form:u.a}),d=Object(c.c)(s),v=t(40),m=t(19),p=t(8),h=t(26),f=t(92),E=t.n(f);t(224);E.a.initializeApp({apiKey:"AIzaSyD49GnV25MVPCggX6231YaJWI777nZZnbI",authDomain:"app-carteira-inv.firebaseapp.com",databaseURL:"https://app-carteira-inv.firebaseio.com",projectId:"app-carteira-inv",storageBucket:"app-carteira-inv.appspot.com",messagingSenderId:"178456734181",appId:"1:178456734181:web:14b6909faa43c59338a70c"});var b=E.a,O=t(276),j=t(298),C=t(291),g=t(281),A=t(131),y=t(278),R=t(280),k=t(282),P=t(283),V=Object(O.a)((function(e){return{container:{margin:"10px"},card:{width:"100%"},text:{fontSize:"14px",fontWeight:"bold"},button:{width:"100%"},red:{color:"red"},blue:{color:"blue"}}})),q=function(e){var a=V(),t=Object(v.f)();return o.a.createElement(y.a,{xs:12,sm:5,md:5,lg:2,className:a.container},o.a.createElement(R.a,{className:a.button},o.a.createElement(g.a,{className:a.card},o.a.createElement(k.a,{onClick:function(){t.push("/carteira/"+e.id)}},o.a.createElement(A.a,{variant:"body2"},"Carteira"),o.a.createElement(A.a,{className:a.text,variant:"h2",color:"primary",align:"center"},e.title)),o.a.createElement(P.a,null,o.a.createElement(R.a,{onClick:e.delete,className:a.red},"Delete"),o.a.createElement(R.a,{onClick:e.update,className:a.blue},"Update")))))},N=t(284),x=Object(O.a)((function(e){return{container:{margin:"10px"},card:{width:"100%"},text:{fontSize:"25px"},button:{width:"100%"}}})),S=function(e){var a=x();return o.a.createElement(y.a,{xs:12,sm:5,md:5,lg:2,className:a.container},o.a.createElement(R.a,{className:a.button,onClick:function(){e.open()}},o.a.createElement(g.a,{className:a.card},o.a.createElement(k.a,null,o.a.createElement(A.a,{variant:"body2"},e.texto),o.a.createElement(A.a,{className:a.text,variant:"h6",align:"center"},o.a.createElement(N.a,null,"add_circle"))))))},T=t(285),z=t(286),w=Object(O.a)((function(e){return{appbar:{position:"relative"}}})),D=function(e){var a=w();return o.a.createElement(T.a,{className:a.appbar},o.a.createElement(z.a,null,o.a.createElement(A.a,null,"Carteira")))},M=t(303),F=t(287),I=t(288),J=t(302),L=(Object(O.a)((function(e){return{}})),function(e){var a=Object(n.useState)(e.nome||""),t=Object(p.a)(a,2),r=t[0],i=t[1];return Object(n.useEffect)((function(){i(e.nome)}),[e.nome]),o.a.createElement(M.a,{onClose:e.onClose,open:e.open},o.a.createElement(F.a,null,"Adicionar Uma nova carteira"),o.a.createElement(I.a,null,o.a.createElement(J.a,{placeholder:"nome",value:r,onChange:function(e){return i(e.target.value)}}),o.a.createElement(R.a,{onClick:function(){e.onSave(r),i("")}}," Salvar ")))}),_=function(){return b.firestore().collection("carteira")},H=Object(O.a)((function(e){return{carteiraContainer:{padding:"20px",marginTop:"40px"},container:{margin:"auto auto"},topContainer:{display:"flex",justifyContent:"center",width:"100%"}}})),U=Object(O.a)((function(e){return{appbar:{position:"relative"}}})),Y=function(e){var a=U();return o.a.createElement(T.a,{className:a.appbar},o.a.createElement(z.a,null,o.a.createElement(A.a,null,"Ativo")))},Q=t(304),W=t(292),B=Object(O.a)((function(e){return{container:{margin:"10px"},card:{width:"100%"},text:{fontSize:"14px",fontWeight:"bold",textTransform:"capitalize"},button:{width:"100%"},cardAction:{display:"flex",justifyContent:"center"}}})),X=function(e){var a=B(),t=Object(v.f)();return o.a.createElement(y.a,{xs:12,sm:5,md:5,lg:2,className:a.container},o.a.createElement(R.a,{className:a.button},o.a.createElement(g.a,{className:a.card},o.a.createElement(k.a,{onClick:function(){t.push(e.base)}},o.a.createElement(A.a,{variant:"body2"},"Ativo"),o.a.createElement(A.a,{className:a.text,variant:"h2",color:"primary",align:"center"},e.title)),o.a.createElement(P.a,{className:a.cardAction},o.a.createElement(R.a,{variant:"contained",color:"secondary",onClick:e.onDelete},"Deletar")))))},Z=t(300),G=t(306),K=(Object(O.a)((function(e){return{}})),function(e){var a=Object(n.useState)(e.nome||null),t=Object(p.a)(a,2),r=t[0],i=t[1],l=Object(n.useState)(e.ehAtivoVariavel||"false"),c=Object(p.a)(l,2),u=c[0],s=c[1],d=Object(n.useState)(e.rotulo||"acao"),v=Object(p.a)(d,2),m=v[0],h=v[1];return o.a.createElement(M.a,{onClose:e.onClose,open:e.open},o.a.createElement(F.a,null,"Adicionar Um novo Ativo"),o.a.createElement(I.a,null,o.a.createElement(j.a,null,o.a.createElement(J.a,{placeholder:"nome",value:r,onChange:function(e){return i(e.target.value)}})),o.a.createElement(j.a,null,o.a.createElement(Z.a,{value:u,onChange:function(e){return s(e.target.value)},placeholder:"Tipo de ativo"},o.a.createElement(G.a,{value:"false"},"Renda Fixa"),o.a.createElement(G.a,{value:"true"},"Renda Variavel"))),o.a.createElement(j.a,null,o.a.createElement(Z.a,{value:m,onChange:function(e){return h(e.target.value)},placeholder:"Seu Ativo"},o.a.createElement(G.a,{value:"acao"},"A\xe7\xe3o"),o.a.createElement(G.a,{value:"fundo_imobiliario"},"Fundo Imobiliario"),o.a.createElement(G.a,{value:"titulo"},"Titulo renda fixa"),o.a.createElement(G.a,{value:"fundo_geral"},"Fundo"),o.a.createElement(G.a,{value:"fundo_de_emergencia"},"Reserva de Emergencia"))),o.a.createElement(R.a,{onClick:function(){e.onSave({nome:r,ehAtivoVariavel:u,rotulo:m}),i("")}}," Salvar ")))}),$=function(){return b.firestore().collection("carteira")},ee=function(e){return b.firestore().collection("carteira/"+e+"/ativo")},ae=Object(O.a)((function(e){return{carteiraContainer:{padding:"20px",marginTop:"40px"},container:{}}})),te=function(e){var a=ae(),t=Object(n.useState)(),r=Object(p.a)(t,2),i=r[0],l=r[1],c=Object(n.useState)(),u=Object(p.a)(c,2),s=u[0],d=u[1],v=Object(n.useState)(!1),f=Object(p.a)(v,2),E=f[0],b=f[1];Object(n.useEffect)((function(){var a=ee(e.match.params.carteira).onSnapshot((function(e){l(e.docs.map((function(e){return console.log(e),Object(h.a)({id:e.id},e.data())})))}));return function(){a()}})),Object(n.useEffect)((function(){$().doc(e.match.params.carteira).get().then((function(e){d(e.data())})),console.log(e.match.url)}),[e.match.url]),Object(n.useEffect)((function(){ee(e.match.params.carteira).get().then((function(a){var t=0;a.forEach((function(a){"number"===typeof a.data().patrimonio&&(t+=a.data().patrimonio,$().doc(e.match.params.carteira).update({patrimonio:t}))}))}))}),[s,e.match.url]);return o.a.createElement(o.a.Fragment,null,o.a.createElement(K,{onClose:function(){return b(!1)},open:E,onSave:function(a){ee(e.match.params.carteira).get().then((function(e){var t=!1;if(e.forEach((function(e){console.log(e.data().nome,a.nome),e.data().nome==a.nome&&(t=!0)})),t)throw"Erro n\xe3o \xe9 possivel adicionar o ativo com o mesmo nome"})).then((function(){ee(e.match.params.carteira).doc().set(Object(h.a)({},a,{patrimonio:0}))})).then((function(){alert("ativo adicionado"),b(!1)})).catch((function(e){return alert(e)}))}}),o.a.createElement(Y,null),o.a.createElement(C.a,{className:a.container},o.a.createElement(g.a,{component:j.a,mt:2,variant:"outlined"},o.a.createElement(k.a,null,o.a.createElement(Q.a,null,o.a.createElement(W.a,{component:m.b,to:"/carteira"}," Voltar")))),o.a.createElement(g.a,{className:a.carteiraContainer,variant:"outlined"},o.a.createElement(A.a,null,"Carteira ",o.a.createElement(A.a,{variant:"inline",color:"primary"}," ",o.a.createElement("strong",null," ",s&&s.title," ")," ")),o.a.createElement(A.a,null,"patrimonio ",s&&s.patrimonio)),o.a.createElement(g.a,{className:a.carteiraContainer,variant:"outlined"},o.a.createElement(A.a,{variant:"h4",component:"h1"},"Seus Ativos"),o.a.createElement(y.a,{container:!0},i&&i.map((function(a){return o.a.createElement(X,{base:"/carteira/"+e.match.params.carteira+"/ativo/"+a.id,key:a.id,title:a.nome,id:a.id,onDelete:function(){return t=a.id,ee(e.match.params.carteira).doc(t).delete().then((function(){return alert("ativo deletado")}));var t}})})),o.a.createElement(S,{texto:"adicionar",open:function(){return b(!0)}})))))},ne=t(293),oe=t(294),re=t(295),ie=t(296),le=t(297),ce=Object(O.a)((function(e){return{button:{marginLeft:"auto",display:"block",marginTop:"25px"}}})),ue=function(e){var a=ce(),t=Object(n.useState)(""),r=Object(p.a)(t,2),i=r[0],l=r[1],c=Object(n.useState)("2020-10-10"),u=Object(p.a)(c,2),s=u[0],d=u[1],v=Object(n.useState)(""),m=Object(p.a)(v,2),f=m[0],E=m[1],b=Object(n.useState)("C"),O=Object(p.a)(b,2),C=O[0],g=O[1],A=Object(n.useState)(),k=Object(p.a)(A,2),P=k[0],V=k[1],q=Object(n.useState)("2020-10-20"),N=Object(p.a)(q,2),x=N[0],S=N[1];return o.a.createElement(M.a,{onClose:e.onClose,open:e.open},o.a.createElement(F.a,null,"Adicionar uma opera\xe7\xe3o ao ativo: ",e.nome),o.a.createElement(I.a,null,o.a.createElement(j.a,null,o.a.createElement(J.a,{placeholder:"Valor",value:i,onChange:function(e){return l(e.target.value)}})),o.a.createElement(j.a,null,"Data",o.a.createElement(J.a,{type:"date",placeholder:"Data",value:s,onChange:function(e){return d(e.target.value)}})),o.a.createElement(j.a,null,o.a.createElement(J.a,{type:"number",placeholder:"Quantidade",value:f,onChange:function(e){return E(e.target.value)}})),o.a.createElement(j.a,null,o.a.createElement(Z.a,{value:C,onChange:function(e){return g(e.target.value)},placeholder:"Opera\xe7\xe3o"},o.a.createElement(G.a,{value:"C"},"Comprar"),o.a.createElement(G.a,{value:"V"},"Vender"),o.a.createElement(G.a,{value:"D"},"Receber Proventos"),o.a.createElement(G.a,{value:"R"},"Resgatar Juros "))),o.a.createElement(j.a,null,"false"==e.EhAtivoVariavel&&o.a.createElement(o.a.Fragment,null,o.a.createElement(j.a,null,o.a.createElement(J.a,{type:"number",placeholder:"Juros",value:P,onChange:function(e){return V(e.target.value)}})),o.a.createElement(j.a,null,"Prazo",o.a.createElement(J.a,{type:"date",placeholder:"Data",value:x,onChange:function(e){return S(e.target.value)}})))),o.a.createElement(y.a,null,o.a.createElement(R.a,{onClick:function(){var a={valor:i,data:s,qtd:f,tipoOperacao:C};"false"==e.EhAtivoVariavel&&(a=Object(h.a)({},a,{juros:P,prazo:x})),e.onSave(a)},variant:"contained",color:"primary",className:a.button}," Realizar A\xe7\xe3o "))))},se=t(43),de=t(62),ve=t(48),me=t(25),pe=t(35),he=t(84),fe=t(81),Ee=(t(43),function(){function e(a){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2?arguments[2]:void 0;Object(me.a)(this,e),this.operacoes=[],this.valorCotacao=0,this.patrimonio=0,this.tipo="",this.pegarOperacoes=function(){return t.operacoes},this.nome=a,this.valorCotacao=n,this.tipo=o}return Object(pe.a)(e,[{key:"buscarValorCotacao",value:function(){}},{key:"calcularCustoDeCompra",value:function(){return this.qtdAtivosEmPosse()*this.calcularMediaCompra()}},{key:"calcularMediaCompra",value:function(){return this.totalCompra()/this.qtdAtivosComprados()}},{key:"calcularMediaVenda",value:function(){return isNaN(this.totalVenda()/this.qtdAtivosVendidos())?0:this.totalVenda()/this.qtdAtivosVendidos()}},{key:"valorPatrimonial",value:function(){return this.qtdAtivosEmPosse()*this.calcularMediaCompra()}},{key:"valorPatrimonialCotacao",value:function(e){return this.qtdAtivosEmPosse()*(e||this.valorCotacao)}},{key:"lucroRelativoNaoRealizado",value:function(e){return this.valorPatrimonialCotacao(e||this.valorCotacao)/this.valorPatrimonial()*100-100}},{key:"lucroNaoRealizado",value:function(e){return this.valorPatrimonialCotacao(e||this.valorCotacao)-this.valorPatrimonial()}},{key:"lucroRealizado",value:function(){var e=this.calcularMediaVenda()*this.qtdAtivosVendidos()-this.calcularMediaCompra()*this.qtdAtivosVendidos();return isNaN(e)&&(e=0),e}},{key:"lucroRealizadoRelativo",value:function(){return this.lucroRealizado()/this.valorPatrimonial()*100}},{key:"lucroTotal",value:function(){return this.lucroRealizado()+this.lucroNaoRealizado()}},{key:"lucroTotalRelativo",value:function(){return this.valorCotacao||console.warn("Aten\xe7\xe3o n\xe3o foi passado o pre\xe7o da cota\xe7\xe3o, ent\xe3o n\xe3o ser\xe1 possivel calcular o lucro realizado"),(this.lucroRealizado()+this.lucroNaoRealizado())/this.valorPatrimonial()*100}},{key:"totalCompra",value:function(){return this.operacoes.reduce((function(e,a){var t=a.valor,n=a.tipo,o=a.qtd;return e+("C"==n?t*o:0)}),0)}},{key:"totalVenda",value:function(){return this.operacoes.reduce((function(e,a){var t=a.valor,n=a.tipo,o=a.qtd;return e+("V"==n?t*o:0)}),0)}},{key:"calcularDiferencaTotalCompraVenda",value:function(){return Math.abs(this.totalVenda()-this.totalCompra())}},{key:"qtdAtivosComprados",value:function(){var e=this.operacoes.reduce((function(e,a){return e+("C"==a.tipo?a.qtd:0)}),0);return Math.abs(e)}},{key:"qtdAtivosVendidos",value:function(){var e=this.operacoes.reduce((function(e,a){return e+("V"==a.tipo?a.qtd:0)}),0);return isNaN(e)?0:Math.abs(e)}},{key:"qtdAtivosEmPosse",value:function(){return Math.abs(this.qtdAtivosComprados()-this.qtdAtivosVendidos())}},{key:"qtd",value:function(){return this.qtdAtivosEmPosse()}}]),e}()),be=function(e){Object(he.a)(t,e);var a=Object(fe.a)(t);function t(e,n,o){var r;return Object(me.a)(this,t),(r=a.call(this,e,n,"Renda Fixa")).atrelacao="SELIC",r.jurosMedio=r.calcularMediaJuros(),r.atrelacao=o,r}return Object(pe.a)(t,[{key:"calcularTempoPassadoEmAnos",value:function(){}},{key:"calcularMediaJuros",value:function(){var e=0;return this.operacoes.reduce((function(a,t){var n=t.juros,o=t.tipo,r=t.qtd;return"C"==o&&(e+=r),a+("C"==o?n*r:0)}),0)/e}},{key:"valorMedioCompraComJuros",value:function(){return this.calcularMediaCompra()+this.calcularMediaJuros()}},{key:"lucroRealizado",value:function(e){e||(e=this.qtdAtivosVendidos()+this.qtdAtivosRealizados());var a=this.calcularMediaJuros()*e;return isNaN(a)&&(a=0),a}},{key:"lucroRealizadoRelativo",value:function(){console.warn("attt",this.qtdAtivosComprados());var e=this.lucroRealizado()/this.valorPatrimonial()*100;return isFinite(e)?e:0}},{key:"lucroTotal",value:function(){return this.lucroRealizado(this.qtdAtivosComprados())}},{key:"lucroTotalRelativo",value:function(){var e=this.lucroTotal()/this.valorPatrimonial()*100;return isFinite(e)?e:0}},{key:"qtdAtivosRealizadosEVendidos",value:function(){return this.qtdAtivosVendidos()+this.qtdAtivosRealizados()}},{key:"calcularMediaVenda",value:function(){var e=this.totalVenda()/this.qtdAtivosRealizadosEVendidos();return isNaN(e)?0:e}},{key:"totalVenda",value:function(){var e=this.operacoes.reduce((function(e,a){var t=a.valor,n=a.tipo,o=a.qtd;return e+("V"==n?t*o:0)}),0);return!isNaN(e)&&e||(e=0),e+this.totalRealizados()}},{key:"calcularMediaRealizados",value:function(){return this.totalRealizados()/this.qtdAtivosRealizados()}},{key:"totalRealizados",value:function(){return this.operacoes.reduce((function(e,a){var t=a.valor,n=a.tipo,o=a.qtd;return e+("R"==n?t*o:0)}),0)}},{key:"qtdAtivosRealizados",value:function(){var e=this.operacoes.reduce((function(e,a){return e+("R"==a.tipo?a.qtd:0)}),0);return Math.abs(e)}}]),t}(Ee),Oe=function(e){Object(he.a)(t,e);var a=Object(fe.a)(t);function t(e,n){return Object(me.a)(this,t),a.call(this,e,n,"Renda Variavel")}return t}(Ee),je=t(16),Ce=t.n(je),ge=t(42),Ae=t(229),ye=function(){var e=Object(ge.a)(Ce.a.mark((function e(a,t){return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"5T9PSLWSUIE8115V",console.log(a),e.next=4,Ae("https://www.alphavantage.co/query?function=TIME_SERIES_DAILY&symbol="+a+".SA&apikey=5T9PSLWSUIE8115V").then((function(e){var a={};a=(a=(a=Object.entries(e.data["Time Series (Daily)"])).map((function(e){return e[1]})))[0]["4. close"],t(a)}));case 4:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}(),Re=function(){function e(a,t){var n=this;Object(me.a)(this,e),this.id=0,this.RendaFixa=[],this.RendaVariavel=[],this.RendaTotal=function(){return[].concat(Object(ve.a)(n.RendaVariavel),Object(ve.a)(n.RendaFixa))},this.TodosAtivos=function(){return n.RendaTotal()},this.dinheiro=0,this.patrimonio=0,this.nome="",this.proporcoes=[],this.listaOperacoes=[],this.listaValorPatrimonialHistorico=[],this.qtdAtivos=0,this.id=a,this.nome=t}return Object(pe.a)(e,[{key:"valorPatrimonialTotal",value:function(){return this.valorPatrimonial()+this.dinheiro}},{key:"valorPatrimonialRendaFixa",value:function(){return this.RendaFixa.reduce((function(e,a){return e+a.valorPatrimonial()}),0)}},{key:"valorPatrimonialRendaVariavel",value:function(){return this.RendaVariavel.reduce((function(e,a){return e+a.valorPatrimonial()}),0)}},{key:"valorPatrimonial",value:function(){return this.TodosAtivos().reduce((function(e,a){return e+a.valorPatrimonial()}),0)}},{key:"lucroCarteiraRealizado",value:function(){return this.TodosAtivos().reduce((function(e,a){return e+(isNaN(a.lucroRealizado())?0:a.lucroRealizado())}),0)}},{key:"lucroCarteiraRealizadoRelativo",value:function(){return this.lucroCarteiraRealizado()/this.totalCompra()*100}},{key:"lucroProvisorioTotal",value:function(){return this.TodosAtivos().reduce((function(e,a){return e+a.lucroTotal()}),0)}},{key:"lucroProvisorioTotalRelativo",value:function(){return this.lucroProvisorioTotal()/this.totalCompra()*100}},{key:"valorPatrimonialCotacao",value:function(){return this.TodosAtivos().reduce((function(e,a){return e+a.valorPatrimonialCotacao(e.valorCotacao)}),0)}},{key:"caixaRelativo",value:function(){return this.dinheiro/this.valorPatrimonial()*100}},{key:"adicionarAtivo",value:function(e){var a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"SELIC";this.listaValorPatrimonialHistorico.push({vp:this.valorPatrimonial(),lucro:this.lucroCarteiraRealizadoRelativo(),lucroProvisorio:this.lucroProvisorioTotalRelativo()}),this.listaOperacoes.sort((function(e,a){return new Date(e.operacao.data)-new Date(a.operacao.data)})),this.listaOperacoes.push({operacao:e}),this.qtdAtivos+=e.qtd;var o=this.TodosAtivos().find((function(a){return a.nome==e.nomeAtivo}));if(null!=o){if("V"==e.tipo){var r=this.ObterAtivoPeloNome(e.nomeAtivo);if(console.log(e.qtd),this.qtdAtivos-=e.qtd,this.dinheiro+=e.qtd*e.valor,console.log("ativo ","qtd ",e.qtd,"juros",e.juros,"valor",e.valor,"lucro",e.valor/r.calcularMediaCompra()*100-100),r&&e.qtd>r.qtdAtivosEmPosse())throw"erro n\xe3o \xe9 possivel remover mais ativos nessa opera\xe7\xe3o, talves voce n\xe3o tenha tantos ativosp para remover, tente remover menos"}else if("R"==e.tipo){var i=this.ObterAtivoPeloNome(e.nomeAtivo);if(this.qtdAtivos-=e.qtd,this.dinheiro+=i.valorMedioCompraComJuros()*e.qtd,console.log("ativo ","qtd ",e.qtd,"juros",i.calcularMediaJuros(),"valor venda",e.valor),i&&e.qtd>i.qtdAtivosEmPosse())throw"erro n\xe3o \xe9 possivel remover mais ativos nessa opera\xe7\xe3o, talves voce n\xe3o tenha tantos ativosp para remover, tente remover menos"}var l=function(a){a.nome==e.nomeAtivo&&(a.operacoes.push(e),0!=t&&(a.valorCotacao=t||a.valorCotacao||0))};a?this.RendaFixa.forEach(l):this.RendaVariavel.forEach(l)}else{var c=a?new be(e.nomeAtivo,t,n):new Oe(e.nomeAtivo,t);c.operacoes.push(e);a?this.RendaFixa.push(c):this.RendaVariavel.push(c)}}},{key:"historico",value:function(){var e=this,a=[],t=1;return this.OrdenarOperacao(),this.listaOperacoes.forEach((function(n){var o,r=n.operacao;t>=e.listaOperacoes.length-t||(a.push((o={nome:r.nomeAtivo,preco:r.valor,data:r.data,qtd:r.qtd,tipo:r.tipo,juros:r.juros,jurosAA:r.jurosAA,qtdTempoAnos:r.qtdTempoAnos,lucro:e.lucroProvisorioTotalRelativo(),vpa:e.listaValorPatrimonialHistorico[t].vp},Object(de.a)(o,"lucro",e.listaValorPatrimonialHistorico[t].lucro),Object(de.a)(o,"lucroProvisorio",e.listaValorPatrimonialHistorico[t].lucroProvisorio),o)),t++)})),a}},{key:"totalCompra",value:function(){return this.TodosAtivos().reduce((function(e,a){return e+a.totalCompra()}),0)}},{key:"OrdenarHistorico",value:function(){this.historico.sort((function(e,a){return new Date(e.data)-new Date(a.data)}))}},{key:"OrdenarOperacao",value:function(){this.operacoes().sort((function(e,a){return new Date(e.data)-new Date(a.data)}))}},{key:"ObterAtivosLista",value:function(){var e=this.RendaTotal(),a=[];return e.forEach((function(e){a=[].concat(Object(ve.a)(a),[e.nome])})),a}},{key:"ObterAtivoPeloNome",value:function(e){var a=!1;return void 0==(a=this.RendaVariavel.find((function(a){return a.nome==e})))&&(a=this.RendaFixa.find((function(a){return a.nome==e}))),a}},{key:"buscarValorCotacao",value:function(){this.RendaVariavel.forEach((function(e){var a=e.nome;try{ye(a,(function(a){e.cotacao=Number(a)}))}catch(t){throw"Erro n\xe3o foi possivel consultar o nome pelo ativo, provavelmente o nome est\xe1 errado, por favor consulte pela sigla do ativo com o numero exemplo itausa: ITSA3"}}))}},{key:"operacoes",value:function(){var e=this.TodosAtivos(),a=[];return e.forEach((function(e){var t=e.operacoes;a=[].concat(Object(ve.a)(a),[t])})),a}},{key:"historicoMensal",value:function(){var e=this.historico();console.log(e);var a=[];return e.forEach((function(e){var t="t"+(e.data.getMonth()+1)+e.data.getFullYear();if(null!=t){var n=0,o=0,r="";if(null!=a[t]){n=a[t].lucroProvisorio;isNaN(n);o=a[t].vpa,isNaN(o)?0:o,r+=e.nome+" ",r+=a[t].nome}else r=e.nome;a[t]={data:e.data.getMonth()+1+"/"+e.data.getFullYear(),nome:r,lucroProvisorio:isNaN(e.lucroProvisorio+n)?0:e.lucroProvisorio+n,vpa:isNaN(e.vpa+o)?0:e.vpa+o}}})),a}},{key:"calcucarProporcoesRendaVariavel",value:function(){var e=this,a=[];return[].concat(Object(ve.a)(this.RendaVariavel),Object(ve.a)(this.RendaFixa)).forEach((function(t){var n=t.valorPatrimonial()/e.valorPatrimonialTotal()*100;a.push({nome:t.nome,proporcao:n,rentabilidadeProvisoria:t.lucroTotalRelativo(),rentabilidade:t.lucroRealizadoRelativo()})})),this.proporcoes=a,a}},{key:"adicionarDinheiro",value:function(e){this.dinheiro+=e}},{key:"removerAtivoId",value:function(e){var a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];a?this.RendaFixa.filter((function(a){return a.id!=e})):this.RendaVariavel.filter((function(a){return a.id!=e}))}},{key:"removerAtivoNome",value:function(e){var a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];a?this.RendaFixa.filter((function(a){return a.nome!=e})):this.RendaVariavel.filter((function(a){return a.nome!=e}))}}]),e}(),ke=function(e,a){return b.firestore().collection("carteira/"+e+"/ativo/"+a+"/operacao")},Pe=function(e){return"/carteira/"+e+"/ativo"},Ve=Object(O.a)((function(e){return{carteiraContainer:{padding:"20px",marginTop:"40px"},container:{},operacoesContainer:{marginTop:"60px",padding:"20px"}}}));function qe(e){var a=e.operacoes,t=e.handleDelete;return o.a.createElement(j.a,{style:{overflowX:"auto"}},o.a.createElement(ne.a,null,o.a.createElement(oe.a,null,o.a.createElement(re.a,null,o.a.createElement(ie.a,null," Patrimonio "),o.a.createElement(ie.a,null," Quantidade "),o.a.createElement(ie.a,null," Custo Unid. "),o.a.createElement(ie.a,null," Prazo "),o.a.createElement(ie.a,null," Data "),o.a.createElement(ie.a,null," Atitude "),o.a.createElement(ie.a,null," A\xe7\xe3o "))),o.a.createElement(le.a,null,a&&a.map((function(e){return o.a.createElement(re.a,{key:e.id},o.a.createElement(ie.a,null," ",e.qtd*e.valor,"   "),o.a.createElement(ie.a,null," ",e.qtd,"    "),o.a.createElement(ie.a,null," ",e.valor,"  "),o.a.createElement(ie.a,null," ",e.prazo||"-","  "),o.a.createElement(ie.a,null," ",e.data," "),o.a.createElement(ie.a,null," ",e.tipoOperacao,"  "),o.a.createElement(ie.a,null,o.a.createElement(R.a,{onClick:function(){return t(e.id)},variant:"contained",color:"secondary"},"Deletar")))})))))}var Ne=[{path:"/",component:function(e){return o.a.createElement(o.a.Fragment,null,"Home")},exact:!0},{path:"/carteira",component:function(e){var a=H();Object(n.useEffect)((function(){var e=_().onSnapshot((function(e){var a=e.docs.map((function(e){return Object(h.a)({id:e.id},e.data())}));l(a),console.log(a)}));return function(){return e()}}),[e.match.url]);var t=Object(n.useState)([]),r=Object(p.a)(t,2),i=r[0],l=r[1],c=Object(n.useState)(!1),u=Object(p.a)(c,2),s=u[0],d=u[1],v=Object(n.useState)({id:0,update:!1,fields:{nome:""}}),m=Object(p.a)(v,2),f=m[0],E=m[1];return o.a.createElement(o.a.Fragment,null,o.a.createElement(L,{onClose:function(){return d(!s)},open:s,onSave:function(e){return a=e,void(f.update?(_().doc(f.id).set({title:a}).then((function(){return d(!1)})),E({id:0,update:!1,fields:{nome:""}})):_().add({title:a}).then((function(){return d(!1)})));var a},nome:f.fields.nome}),o.a.createElement(D,null),o.a.createElement(j.a,{bgColor:"green",className:a.topContainer},o.a.createElement(C.a,{className:a.container},o.a.createElement(g.a,{className:a.carteiraContainer,variant:"outlined"},o.a.createElement(A.a,null,"Suas"),o.a.createElement(A.a,{variant:"h4",component:"h1"},"Carteiras"),o.a.createElement(y.a,{container:!0,spacing:2},i&&i.map((function(e){return o.a.createElement(q,{key:e.id,title:e.title,id:e.id,delete:function(){return a=e.id,_().doc(a).delete();var a},update:function(){return a=e.id,void _().doc(a).get().then((function(e){console.log(e.data().title),E({id:a,update:!0,fields:{nome:e.data().title}}),d(!0)}));var a}})})),o.a.createElement(S,{texto:"Adicionar",open:function(){return d(!0)}}))))))},exact:!0},{path:"/carteira/:carteira",component:te,exact:!0},{path:"/carteira/:carteira/ativo",component:te,exact:!0},{path:"/carteira/:carteira/ativo/:ativo",component:function(e){var a=e.match.params.carteira,t=e.match.params.ativo,r=Ve(),i=Object(n.useState)({}),l=Object(p.a)(i,2),c=l[0],u=l[1],s=Object(n.useState)([]),d=Object(p.a)(s,2),v=d[0],f=d[1],E=Object(n.useState)(1),O=Object(p.a)(E,2),y=O[0],P=O[1],V=Object(n.useState)({title:""}),q=Object(p.a)(V,2),N=q[0],x=q[1],S=Object(n.useState)(new Re(a)),T=Object(p.a)(S,2),z=T[0],w=T[1],D=Object(n.useState)(!1),M=Object(p.a)(D,2),F=M[0],I=M[1];return Object(n.useEffect)((function(){var e=b.firestore().collection("carteira/"+a+"/ativo/").doc(t).get().then((function(e){e.exists||alert("not exists"),u(Object(h.a)({},e.data(),{id:e.id}))}));return function(){return e}}),[e.match.url,F]),Object(n.useEffect)((function(){b.firestore().collection("carteira").doc(a).get().then((function(e){x(e.data())}))}),[e.match.url,F]),Object(n.useEffect)((function(){var e=ke(a,t).onSnapshot((function(e){var n,o=new Re(a),r=e.docs.map((function(e){var a="true"!=e.data().ehAtivoVariavel;console.log("Opera\xe7\xe3o ",e);var t=new se.Operacao(e.data().nome,parseFloat(e.data().valor),parseFloat(e.data().data),e.data().tipoOperacao,parseInt(e.data().qtd));return console.log("_Carteira",o),o.adicionarAtivo(t,a,e.data().valor),Object(h.a)({id:e.id},e.data(),{detalhes:t})})),i=0;try{i=o.valorPatrimonial()}catch(l){console.log(l)}i="NaN"===typeof i?0:i,(n=a,b.firestore().collection("carteira/"+n+"/ativo")).doc(t).update({patrimonio:i}).then((function(){console.log("updated"),P(y+1)})),f(r),w(o),console.log("CARTEIRA",o),P(y+1)}));return function(){return e}}),[e.match.url,F,z.valorPatrimonial()]),o.a.createElement(o.a.Fragment,null,o.a.createElement(Y,null),o.a.createElement(ue,{open:F,onClose:function(){return I(!1)},nome:c.nome,onSave:function(e){ke(a,t).add(e).then((function(){console.log(e),I(!1)}))},EhAtivoVariavel:c.ehAtivoVariavel}),o.a.createElement(C.a,{className:r.container},o.a.createElement(g.a,{component:j.a,mt:2,variant:"outlined"},o.a.createElement(k.a,null,o.a.createElement(Q.a,null,o.a.createElement(W.a,{component:m.b,to:"/carteira"},"Carteira"),o.a.createElement(W.a,{component:m.b,to:Pe(a)}," Ativos")))),o.a.createElement(g.a,{className:r.carteiraContainer,variant:"outlined"},o.a.createElement(A.a,null,"Carteira: ",N.title),o.a.createElement(A.a,{variant:"h4",color:"primary"},"Ativo: ",c.nome),o.a.createElement(A.a,null,"Patrimonio R$",o.a.createElement("strong",null," ",c.patrimonio," ")),o.a.createElement(A.a,{style:{color:"#3F51B5"}},c.rotulo),o.a.createElement(A.a,null,"true"==c.ehAtivoVariavel?"renda variavel":"renda fixa"),o.a.createElement(R.a,{variant:"contained",color:"primary",onClick:function(){return I(!0)}}," Adicionar Opera\xe7\xe3o ")),o.a.createElement(g.a,{className:r.operacoesContainer,variant:"outlined"},o.a.createElement(k.a,null,o.a.createElement(A.a,{variant:"h4",color:"primary"},"Opera\xe7\xf5es"),o.a.createElement(qe,{operacoes:v,handleDelete:function(e){ke(a,t).doc(e).delete().then((function(){P(y+1)}))}})))))},exact:!0}];Object(O.a)((function(e){return{appbar:{display:"block",position:"relative"}}}));var xe=function(){return Ne.map((function(e,a){return o.a.createElement(v.a,{path:e.path,exact:e.exact,key:a,component:e.component})}))};var Se=function(e){return o.a.createElement("div",{className:"App"},o.a.createElement(y.a,{container:!0},o.a.createElement(m.a,null,o.a.createElement(v.c,null,o.a.createElement(xe,null)))))};i.a.render(o.a.createElement(l.a,{store:d},o.a.createElement(Se,null)),document.getElementById("root"))},43:function(e,a,t){"use strict";t.r(a),t.d(a,"Operacao",(function(){return i})),t.d(a,"TipoOperacao",(function(){return r}));var n=t(25),o=t(35),r={Comprar:"C",Vender:"V",Jsp:"J",Dividendos:"D",Resgate:"R"},i=function(){function e(a,t,o,r,i,l,c,u){Object(n.a)(this,e),this.nomeAtivo=a,this.id=u||Math.random(),this.valor=t,this.data=o||new Date,this.tipo=r,this.qtd=i,this.juros=this.calcularJuros(c,this.calcularQtdAnos(o,l)),this.jurosAA=c,this.qtdTempoAnos=this.calcularQtdAnos(o,l),this.prazo=l}return Object(o.a)(e,[{key:"calcularQtdAnos",value:function(e,a){return null!=e&&null!=a?new Date(a).getFullYear()-new Date(e).getFullYear():0}},{key:"calcularJuros",value:function(e,a){return a>0?e*a:0}}],[{key:"Resgate",value:function(a,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3?arguments[3]:void 0;return new e(a,null,o,r.Resgate,t,null,n)}}]),e}()}},[[141,1,2]]]);
//# sourceMappingURL=main.3f43074b.chunk.js.map